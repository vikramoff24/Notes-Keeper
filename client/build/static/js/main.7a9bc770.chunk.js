(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{66:function(e,t,a){},94:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(0),c=a(17),s=a.n(c),o=(a(66),a(25)),i=Object(r.createContext)(),l=Object(r.createContext)(),u=function(e){var t=e.title,a=e.icon,c=Object(r.useContext)(i),s=Object(r.useContext)(l),u=c.user,j=c.isAuthenticated,d=c.logout,p=s.clearNotes,b=Object(n.jsxs)(r.Fragment,{children:[Object(n.jsxs)("li",{children:["Hello ",u&&u.name]}),Object(n.jsx)("li",{children:Object(n.jsxs)("a",{onClick:function(){p(),d()},href:"#!",children:[Object(n.jsx)("i",{className:"fas fa-sign-out-alt"}),Object(n.jsx)("span",{className:"hide-sm",children:"Logout"})]})})]}),O=Object(n.jsxs)(r.Fragment,{children:[Object(n.jsx)("li",{children:Object(n.jsx)(o.b,{to:"/register",children:"Register"})}),Object(n.jsx)("li",{children:Object(n.jsx)(o.b,{to:"/login",children:"Login"})})]});return Object(n.jsxs)("div",{className:"navbar bg-primary ",children:[Object(n.jsxs)("h1",{className:"brand",children:[Object(n.jsx)("i",{className:a})," ",t]}),Object(n.jsx)("ul",{children:j?b:O})]})};u.defaultProps={title:"Notes keeper",icon:"far fa-clipboard"};var j=u,d=a(21),p=a(3),b=a(9),O=Object(r.createContext)(),h=function(e){var t=Object(r.useContext)(O),a=Object(r.useContext)(i),c=t.setAlert,s=a.register,o=a.error,l=a.clearErrors,u=a.isAuthenticated;Object(r.useEffect)((function(){u&&e.history.push("/"),"User already exists"===o&&(c(o,"danger"),l())}),[o,u,e.history]);var j=Object(r.useState)({name:"",email:"",password:"",password2:""}),h=Object(b.a)(j,2),x=h[0],m=h[1],f=x.name,v=x.email,g=x.password,y=x.password2,N=function(e){m(Object(p.a)(Object(p.a)({},x),{},Object(d.a)({},e.target.name,e.target.value)))};return Object(n.jsxs)("div",{className:"form-container",children:[Object(n.jsxs)("h1",{children:["Account ",Object(n.jsx)("span",{className:"text-primary",children:" Register"})]}),Object(n.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""===f||""===v||""===g?c("Please enter all fields","danger"):g!==y?c("Password do not match","danger"):s({name:f,email:v,password:g})},children:[Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"name",children:"Name"}),Object(n.jsx)("input",{type:"text",name:"name",value:f,onChange:N})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"email",children:"Email Address"}),Object(n.jsx)("input",{type:"email",name:"email",value:v,onChange:N})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"password",children:"Password"}),Object(n.jsx)("input",{type:"password",name:"password",value:g,onChange:N,minLength:"6"})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"password2",children:"Confirm Password"}),Object(n.jsx)("input",{type:"password",name:"password2",value:y,onChange:N,minLength:"6"})]}),Object(n.jsx)("input",{type:"submit",value:"Register",className:"btn btn-primary btn-block"})]})]})},x=function(e){var t=Object(r.useContext)(i),a=Object(r.useContext)(O),c=t.login,s=t.isAuthenticated,o=t.error,l=t.clearErrors,u=a.setAlert;Object(r.useEffect)((function(){s&&e.history.push("/"),"Invalid Credentials"===o&&(u(o,"danger"),l())}),[s,e.history,o]);var j=Object(r.useState)({email:"",password:""}),h=Object(b.a)(j,2),x=h[0],m=h[1],f=x.email,v=x.password,g=function(e){m(Object(p.a)(Object(p.a)({},x),{},Object(d.a)({},e.target.name,e.target.value)))};return Object(n.jsxs)("div",{className:"form-container",children:[Object(n.jsxs)("h1",{children:["Account ",Object(n.jsx)("span",{className:"text-primary",children:"Login"})]}),Object(n.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""===f||""===v?u("Please fill in all fields","danger"):c({email:f,password:v})},children:[Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"email",children:"Email Address"}),Object(n.jsx)("input",{type:"email",name:"email",value:f,onChange:g})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"password",children:"Password"}),Object(n.jsx)("input",{type:"password",name:"password",value:v,onChange:g})]}),Object(n.jsx)("input",{type:"submit",value:"Login",className:"btn btn-primary btn-block"})]})]})},m=a(55),f=a.n(m),v=a(113),g=a(115),y=function(e){var t=Object(r.useContext)(l).addNote,a=Object(r.useState)(""),c=Object(b.a)(a,2),s=c[0],o=c[1],i=Object(r.useState)({title:"",description:""}),u=Object(b.a)(i,2),j=u[0],O=u[1],h=Object(r.useState)(!1),x=Object(b.a)(h,2),m=x[0],y=x[1],N=function(e){var t=e.target,a=t.name,n=t.value;O((function(e){return Object(p.a)(Object(p.a)({},e),{},Object(d.a)({},a,n))})),"description"===a&&(y(!0),""===n&&y(!1)),"description"===a&&(!function(e,t){if(e){var a=e.target?e.target:e;a.style.height=t,a.style.height="".concat(a.scrollHeight,"px")}}(e,"80px"),o(e))};return Object(n.jsx)("div",{children:Object(n.jsxs)("form",{autoComplete:"off",className:"create-note",children:[m&&Object(n.jsx)("input",{name:"title",placeholder:"Title",value:j.title,onChange:N}),Object(n.jsx)("textarea",{name:"description",placeholder:"Take a note...",value:j.description,onChange:N}),Object(n.jsx)(g.a,{in:!!m,children:Object(n.jsx)(v.a,{onClick:function(e){t(j),O({title:"",description:""}),y(!1),s.target.style.height="55px",e.preventDefault()},children:Object(n.jsx)(f.a,{})})})]})})},N=a(56),w=a.n(N),C=function(e){var t=Object(r.useContext)(l).deleteNote;return Object(n.jsxs)("div",{className:"note",children:[Object(n.jsx)("h1",{children:e.title}),Object(n.jsx)("p",{children:e.description}),Object(n.jsx)("button",{children:Object(n.jsx)(w.a,{onClick:function(){t(e._id)}})})]})},E=function(){var e=Object(r.useContext)(l),t=e.getNotes,a=e.notes;return Object(r.useEffect)((function(){t()}),[]),a.map((function(e){return Object(n.jsx)(C,{_id:e._id,title:e.title,description:e.description},e._id)}))},k=function(){var e=Object(r.useContext)(i);return Object(r.useEffect)((function(){e.loadUser()}),[]),Object(n.jsxs)(r.Fragment,{children:[Object(n.jsx)(y,{}),Object(n.jsx)("div",{className:"note-section",children:Object(n.jsx)(E,{})})]})},A=a(5),S=a(10),R=a.n(S),T=a(23),_=a(39),L="ADD_NOTE",F="DELETE_NOTE",I="CLEAR_NOTES",P="SET_ALERT",D="REMOVE_ALERT",U="NOTE_ERROR",G="REGISTER_SUCCESS",H="REGISTER_FAIL",J="USER_LOADED",B="AUTH_ERROR",M="LOGIN_SUCCESS",V="LOGIN_FAIL",q="LOGOUT",z="CLEAR_ERRORS",K=function(e,t){switch(t.type){case"GET":return Object(p.a)(Object(p.a)({},e),{},{notes:t.payload.reverse(),loading:!1});case L:return Object(p.a)(Object(p.a)({},e),{},{notes:[t.payload].concat(Object(_.a)(e.notes)),loading:!1});case F:return Object(p.a)(Object(p.a)({},e),{},{notes:e.notes.filter((function(e){return e._id!==t.payload})),loading:!1});case I:return Object(p.a)(Object(p.a)({},e),{},{notes:[],error:null});case U:return Object(p.a)(Object(p.a)({},e),{},{error:t.payload});default:return e}},Q=a(16),W=a.n(Q),X=function(e){var t=Object(r.useReducer)(K,{notes:[],error:null}),a=Object(b.a)(t,2),c=a[0],s=a[1],o=function(){var e=Object(T.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W.a.get("/api/notes");case 3:t=e.sent,s({type:"GET",payload:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),s({type:U,payload:e.t0.response.data.msg});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(T.a)(R.a.mark((function e(t){var a,n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={header:{"Content-Type":"application/json"}},e.prev=1,e.next=4,W.a.post("/api/notes",t,a);case 4:n=e.sent,s({type:L,payload:n.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),s({type:U,payload:e.t0.response.data.msg});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(T.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W.a.delete("/api/notes/".concat(t));case 3:s({type:F,payload:t}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),s({type:U,payload:e.t0.response.data.msg});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)(l.Provider,{value:{notes:c.notes,getNotes:o,addNote:i,deleteNote:u,clearNotes:function(){s({type:I})}},children:e.children})},Y=function(e,t){switch(t.type){case J:return Object(p.a)(Object(p.a)({},e),{},{isAuthenticated:!0,loading:!1,user:t.payload});case G:case M:return localStorage.setItem("token",t.payload.token),Object(p.a)(Object(p.a)(Object(p.a)({},e),t.payload),{},{isAuthenticated:!0,loading:!1});case V:case H:case B:case q:return localStorage.removeItem("token"),Object(p.a)(Object(p.a)({},e),{},{token:null,isAuthenticated:!1,loading:!1,user:null,error:t.payload});case z:return Object(p.a)(Object(p.a)({},e),{},{error:null});default:return e}},Z=function(e){e?W.a.defaults.headers.common["x-auth-token"]=e:delete W.a.defaults.headers.common["x-auth-token"]},$=function(e){var t={token:localStorage.getItem("token"),isAuthenticated:null,loading:!0,user:null,error:null},a=Object(r.useReducer)(Y,t),c=Object(b.a)(a,2),s=c[0],o=c[1],l=function(){var e=Object(T.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.token,Z(localStorage.token),e.prev=2,e.next=5,W.a.get("/api/auth");case 5:t=e.sent,o({type:J,payload:t.data}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),o({type:B});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=Object(T.a)(R.a.mark((function e(t){var a,n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={header:{"Content-Type":"application/json"}},e.prev=1,e.next=4,W.a.post("/api/users",t,a);case 4:n=e.sent,o({type:G,payload:n.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),o({type:H,payload:e.t0.response.data.msg});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(T.a)(R.a.mark((function e(t){var a,n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={header:{"Content-Type":"application/json"}},e.prev=1,e.next=4,W.a.post("api/auth",t,a);case 4:n=e.sent,o({type:M,payload:n.data}),l(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),o({type:V,payload:e.t0.response.data.msg});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)(i.Provider,{value:{token:s.token,isAuthenticated:s.isAuthenticated,loading:s.loading,user:s.user,error:s.error,register:u,loadUser:l,clearErrors:function(){return o({type:z})},login:j,logout:function(){return o({type:q})}},children:e.children})},ee=a(114),te=function(e,t){switch(t.type){case P:return[].concat(Object(_.a)(e),[t.payload]);case D:return e.filter((function(e){return e.id!==t.payload}));default:return e}},ae=function(e){var t=Object(r.useReducer)(te,[]),a=Object(b.a)(t,2),c=a[0],s=a[1];return Object(n.jsx)(O.Provider,{value:{alerts:c,setAlert:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,n=Object(ee.a)();s({type:P,payload:{msg:e,type:t,id:n}}),setTimeout((function(){return s({type:D,payload:n})}),a)}},children:e.children})},ne=function(){var e=Object(r.useContext)(O);return e.alerts.length>0&&e.alerts.map((function(e){return Object(n.jsxs)("div",{className:"alert alert-".concat(e.type),children:[Object(n.jsx)("i",{className:"fas fa-info-circle"})," ",e.msg]},e.id)}))},re=a(57),ce=function(e){var t=e.component,a=Object(re.a)(e,["component"]),c=Object(r.useContext)(i),s=c.isAuthenticated,o=c.loading;return Object(n.jsx)(A.b,Object(p.a)(Object(p.a)({},a),{},{render:function(e){return s||o?Object(n.jsx)(t,Object(p.a)({},e)):Object(n.jsx)(A.a,{to:"/login"})}}))};localStorage.token&&Z(localStorage.token);var se=function(){return Object(n.jsx)($,{children:Object(n.jsx)(X,{children:Object(n.jsx)(ae,{children:Object(n.jsx)(o.a,{children:Object(n.jsxs)(r.Fragment,{children:[Object(n.jsx)(j,{}),Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)(ne,{}),Object(n.jsxs)(A.d,{children:[Object(n.jsx)(ce,{exact:!0,path:"/",component:k}),Object(n.jsx)(A.b,{exact:!0,path:"/register",component:h}),Object(n.jsx)(A.b,{exact:!0,path:"/login",component:x})]})]})]})})})})})};s.a.render(Object(n.jsx)(se,{}),document.getElementById("root"))}},[[94,1,2]]]);
//# sourceMappingURL=main.7a9bc770.chunk.js.map